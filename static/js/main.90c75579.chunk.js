(this["webpackJsonpcovid-19"]=this["webpackJsonpcovid-19"]||[]).push([[0],{111:function(e,t,a){e.exports=a(145)},116:function(e,t,a){},117:function(e,t,a){},121:function(e,t,a){},145:function(e,t,a){"use strict";a.r(t);var i,n,r=a(0),l=a.n(r),s=a(11),o=a.n(s),c=(a(116),a(71)),m=a(14),u=a(59),b=a(95),p=a(99),d=a(100),y=(a(117),a(70)),E=a(198),O=a(202),C=a(201),h=a(197),f=a(199),v=a(200),g=a(76),R="CASES",A="BUCKETS",k="SUMMARY",S={FEVER:"FEVER",COUGH:"COUGH",BREATHING_PROBLEM:"BREATHING_PROBLEM",CLOSE_CONTACT:"CLOSE_CONTACT",COMING_FROM_ABROAD:"COMING_FROM_ABROAD"},_=a(195),N=a(196),T=a(204),B=a(78),I=a.n(B),M=a(79),G=a.n(M),x=a(203),j=a(80),w=a.n(j),F=a(96),H=a.n(F),D=a(15),L=a(218),P=a(190),V=a(191),U=a(194),z=a(149),K=a(192),J=a(193),W=a(216),q=a(215),Y=(i={},Object(D.a)(i,S.FEVER,"Fever"),Object(D.a)(i,S.COUGH,"Cough"),Object(D.a)(i,S.BREATHING_PROBLEM,"Difficulty with breathing"),Object(D.a)(i,S.COMING_FROM_ABROAD,"Return from Abroad"),Object(D.a)(i,S.CLOSE_CONTACT,"Close contact with infected person"),i),$={id:"",symptoms:(n={},Object(D.a)(n,S.FEVER,!1),Object(D.a)(n,S.COUGH,!1),Object(D.a)(n,S.BREATHING_PROBLEM,!1),Object(D.a)(n,S.COMING_FROM_ABROAD,!1),Object(D.a)(n,S.CLOSE_CONTACT,!1),n),createNext:!1},Q=function(e){var t=e.open,a=e.handleClose,i=l.a.useState($),n=Object(y.a)(i,2),r=n[0],s=n[1];return l.a.createElement(L.a,{open:t,onClose:a,"aria-labelledby":"form-dialog-title"},l.a.createElement(P.a,{id:"form-dialog-title"},"Craete new case"),l.a.createElement(V.a,null,l.a.createElement(K.a,{column:!0},l.a.createElement(q.a,{label:"id",variant:"outlined",onChange:function(e){s(Object(m.a)({},r,{id:e.target.value}))},value:r.id,required:!0}),Object.keys(S).map((function(e){return l.a.createElement(J.a,{key:e,control:l.a.createElement(W.a,{checked:r.symptoms[e],onChange:(t=e,function(){s(Object(m.a)({},r,{symptoms:Object(m.a)({},r.symptoms,Object(D.a)({},t,!r.symptoms[t]))}))}),name:Y[e]}),label:Y[e]});var t})))),l.a.createElement(U.a,null,l.a.createElement(z.a,{onClick:function(){a({close:!0})},color:"secondary"},"Close"),l.a.createElement(J.a,{control:l.a.createElement(W.a,{checked:r.createNext,onChange:function(){s(Object(m.a)({},r,{createNext:!r.createNext}))},color:"secondary"}),label:"Create next case"}),l.a.createElement(z.a,{onClick:function(){r.createNext?(a({close:!1,values:{id:r.id,symptoms:r.symptoms}}),s(Object(m.a)({},$,{createNext:!0}))):a({close:!0,values:{id:r.id,symptoms:r.symptoms}})},color:"primary",disabled:!r.id},"Create")))},X=function(e){return e?l.a.createElement(_.a,{style:{color:I.a[500]}}):l.a.createElement(N.a,{style:{color:G.a[500]}})},Z=function(e){var t=e.cases,a=e.addCase,i=e.addDemoCases,n=e.removeCase,r=l.a.useState({newCaseModal:!1}),s=Object(y.a)(r,2),o=s[0],c=s[1],m=function(){c({newCaseModal:!0})};return l.a.createElement("div",null,l.a.createElement(Q,{open:o.newCaseModal,handleClose:function(e){var t=e.close,i=e.values;c({newCaseModal:!t}),i&&a({id:i.id,symptoms:Object.keys(i.symptoms).filter((function(e){return i.symptoms[e]}))})}}),!!t.length&&l.a.createElement("div",null,l.a.createElement(h.a,{component:g.a},l.a.createElement(E.a,{"aria-label":"simple table"},l.a.createElement(f.a,null,l.a.createElement(v.a,null,l.a.createElement(C.a,null," ",l.a.createElement("b",null,"id")),l.a.createElement(C.a,{align:"right"},l.a.createElement("b",null,"Fever")),l.a.createElement(C.a,{align:"right"},l.a.createElement("b",null,"Cough")),l.a.createElement(C.a,{align:"right"},l.a.createElement("b",null,"Difficulty with breathing")),l.a.createElement(C.a,{align:"right"},l.a.createElement("b",null,"Close contact with infected person")),l.a.createElement(C.a,{align:"right"},l.a.createElement("b",null,"Return from Abroad")),l.a.createElement(C.a,{align:"right"},l.a.createElement("b",null,"Probability")),l.a.createElement(C.a,{align:"right"},l.a.createElement("b",null,"Action")))),l.a.createElement(O.a,null,t.map((function(e){return l.a.createElement(v.a,{key:e.id},l.a.createElement(C.a,{component:"th",scope:"row"},e.id),l.a.createElement(C.a,{align:"right"},X(e.symptoms.includes(S.FEVER))),l.a.createElement(C.a,{align:"right"},X(e.symptoms.includes(S.COUGH))),l.a.createElement(C.a,{align:"right"},X(e.symptoms.includes(S.BREATHING_PROBLEM))),l.a.createElement(C.a,{align:"right"},X(e.symptoms.includes(S.CLOSE_CONTACT))),l.a.createElement(C.a,{align:"right"},X(e.symptoms.includes(S.COMING_FROM_ABROAD))),l.a.createElement(C.a,{align:"right"},(100*e.probability).toFixed(2),"%"),l.a.createElement(C.a,{align:"right"},l.a.createElement(H.a,{style:{cursor:"pointer"},onClick:function(){return n(e.id)}})))}))))),l.a.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"flex-end",margin:"16px 0"}},l.a.createElement(x.a,{onClick:m},l.a.createElement(w.a,null)))),!t.length&&l.a.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"center"}},l.a.createElement(z.a,{size:"large",color:"secondary",onClick:i,style:{margin:"16px"},startIcon:l.a.createElement(T.a,null)},"Load example cases"),l.a.createElement(z.a,{size:"large",color:"primary",variant:"contained",onClick:m,startIcon:l.a.createElement(w.a,null),style:{margin:"16px"}},"Add first case")))},ee=a(214),te=a(205),ae=(a(121),a(81)),ie=a(206),ne=a(207),re=a(208),le=a(210),se=a(211),oe=a(212),ce=a(209);function me(e){e.sort((function(e,t){return e.probability<t.probability?1:e.probability>t.probability?-1:0}));for(var t=new pe,a=function(e){for(var t=[new ye(.306,1,1),new ye(.124,.306,3),new ye(.066,.124,4),new ye(.042,.066,5),new ye(.029,.042,6),new ye(.021,.029,7),new ye(.016,.021,8),new ye(.013,.016,9),new ye(.011,.013,10),new ye(.009,.011,11),new ye(.007,.009,12),new ye(.006,.007,13),new ye(.005,.006,15),new ye(.004,.005,16),new ye(.003,.004,19),new ye(.002,.003,23),new ye(0,.002,32)],a=0;a<t.length;a++){var i=t[a];if(i.isInRange(e.probability))return i.bestBucketSize}return console.error("The sample probability is out of range! "+e.probability),1}(e[0]),i=0;i<e.length;i++){var n=e[i];a>0&&(t.samples.push(n),t.reverseProbability*=1-n.probability,a--)}return t.probability=1-t.reverseProbability,t}function ue(e){for(var t=0,a=0;a<e.length;a++)t+=1,e[a].samples.length>1&&(t+=e[a].probability*e[a].samples.length);return Math.round(t)}var be=0,pe=function e(){Object(u.a)(this,e),this.id=++be,this.probability=0,this.reverseProbability=1,this.samples=[],this.bucketStatus=de.NOT_CHECKED},de={POSITIVE:0,NEGATIVE:1,NOT_CHECKED:3},ye=function(){function e(e,t,a){void 0===this.minimum&&(this.minimum=0),void 0===this.maximum&&(this.maximum=0),void 0===this.bestBucketSize&&(this.bestBucketSize=0),this.minimum=e,this.maximum=t,this.bestBucketSize=a}return e.prototype.isInRange=function(e){return this.minimum<=e&&e<this.maximum},e}();ye.__class="BucketProbabilityRange";var Ee=function(e){var t=e.buckets,a=e.estimatedNumberOfTests,i=e.setBucketStatus;return l.a.createElement("div",null,l.a.createElement(ae.a,{variant:"h4",style:{marginBottom:20}},"Estimated number of tests: ",a),l.a.createElement(te.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:4},t.map((function(e,t){return l.a.createElement(te.a,{item:!0,key:t},l.a.createElement(g.a,{elevation:0,className:"bucket"},l.a.createElement(ae.a,{variant:"h5",component:"h2"},"#",e.id),l.a.createElement(ae.a,{color:"textSecondary"},"Probability: ",(100*e.probability).toFixed(2),"%"),l.a.createElement(te.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"center",spacing:1,style:{padding:"8px 0"}},e.samples.map((function(e){return l.a.createElement(te.a,{item:!0,key:e.id},l.a.createElement(ie.a,{className:"sampleCard"},l.a.createElement(ne.a,null,l.a.createElement(ae.a,{variant:"h5",component:"h3"},l.a.createElement(re.a,null,e.id)),l.a.createElement(ae.a,{color:"textSecondary"},"Probability: ",(100*e.probability).toFixed(2),"%"))))}))),l.a.createElement(ce.a,{orientation:"vertical",fullWidth:!0,disableRipple:!0,disableFocusRipple:!0,size:"small"},l.a.createElement(z.a,{variant:e.bucketStatus===de.NEGATIVE?"contained":"outlined",color:e.bucketStatus===de.NEGATIVE?"primary":"default",startIcon:l.a.createElement(le.a,null),onClick:function(){return i(e.id,de.NEGATIVE)},disableElevation:!0}," No Virus "),l.a.createElement(z.a,{variant:e.bucketStatus===de.POSITIVE?"contained":"outlined",color:e.bucketStatus===de.POSITIVE?"primary":"default",startIcon:l.a.createElement(se.a,null),onClick:function(){return i(e.id,de.POSITIVE)},disableElevation:!0}," Virus found "),l.a.createElement(z.a,{variant:e.bucketStatus===de.NOT_CHECKED?"contained":"outlined",color:e.bucketStatus===de.NOT_CHECKED?"primary":"default",startIcon:l.a.createElement(oe.a,null),onClick:function(){return i(e.id,de.NOT_CHECKED)},disableElevation:!0}," Not tested "))))}))))},Oe=a(98),Ce=a.n(Oe),he=a(213),fe=a(97),ve=a.n(fe),ge=function(e){var t=e.callback;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ae.a,{align:"center",variant:"h2",component:"h2"},l.a.createElement("b",null,"Good Job")),l.a.createElement(ae.a,{align:"center",variant:"h4",component:"h4"},"All samples have been checked"),l.a.createElement("div",{style:{display:"flex",justifyContent:"center",margin:"32px 0"}},l.a.createElement(z.a,{size:"large",variant:"contained",onClick:t,color:"secondary"},"Crete new case")))},Re=[{id:1,symptoms:[],probability:.02},{id:2,symptoms:[S.COUGH],probability:.05},{id:3,symptoms:[S.BREATHING_PROBLEM,S.FEVER],probability:.09},{id:4,symptoms:[S.CLOSE_CONTACT,S.COMING_FROM_ABROAD],probability:.19},{id:5,symptoms:[S.COUGH,S.COMING_FROM_ABROAD],probability:.12},{id:6,symptoms:[S.COUGH,S.COMING_FROM_ABROAD],probability:.15},{id:7,symptoms:[],probability:.02},{id:8,symptoms:[],probability:.02},{id:9,symptoms:[],probability:.02},{id:10,symptoms:[S.COUGH,S.BREATHING_PROBLEM,S.FEVER,S.COMING_FROM_ABROAD,S.CLOSE_CONTACT],probability:.29},{id:11,symptoms:[],probability:.02},{id:12,symptoms:[],probability:.02},{id:13,symptoms:[S.CLOSE_CONTACT],probability:.02},{id:14,symptoms:[],probability:.02},{id:15,symptoms:[],probability:.02},{id:16,symptoms:[],probability:.02},{id:17,symptoms:[S.COUGH,S.BREATHING_PROBLEM],probability:.05},{id:18,symptoms:[S.COUGH,S.FEVER],probability:.05},{id:19,symptoms:[],probability:.02},{id:20,symptoms:[],probability:.02},{id:21,symptoms:[],probability:.02},{id:22,symptoms:[],probability:.02},{id:23,symptoms:[],probability:.02},{id:24,symptoms:[S.BREATHING_PROBLEM,S.FEVER],probability:.09},{id:25,symptoms:[S.CLOSE_CONTACT,S.COMING_FROM_ABROAD],probability:.19},{id:26,symptoms:[S.COUGH,S.COMING_FROM_ABROAD],probability:.12},{id:27,symptoms:[],probability:.02},{id:28,symptoms:[S.COUGH,S.BREATHING_PROBLEM,S.FEVER,S.COMING_FROM_ABROAD],probability:.19},{id:29,symptoms:[],probability:.02},{id:30,symptoms:[],probability:.02},{id:31,symptoms:[],probability:.02},{id:32,symptoms:[],probability:.02},{id:33,symptoms:[S.COUGH],probability:.05},{id:34,symptoms:[S.CLOSE_CONTACT],probability:.1},{id:35,symptoms:[S.COUGH],probability:.05},{id:36,symptoms:[S.BREATHING_PROBLEM,S.FEVER],probability:.09},{id:37,symptoms:[S.CLOSE_CONTACT,S.COMING_FROM_ABROAD],probability:.19},{id:38,symptoms:[],probability:.02},{id:39,symptoms:[],probability:.02},{id:40,symptoms:[],probability:.02},{id:41,symptoms:[],probability:.02},{id:42,symptoms:[],probability:.02},{id:43,symptoms:[],probability:.02},{id:44,symptoms:[],probability:.02},{id:45,symptoms:[S.COUGH,S.BREATHING_PROBLEM,S.FEVER,S.COMING_FROM_ABROAD,S.CLOSE_CONTACT],probability:.29},{id:46,symptoms:[S.COUGH,S.FEVER,S.COMING_FROM_ABROAD,S.CLOSE_CONTACT],probability:.24},{id:47,symptoms:[],probability:.02},{id:48,symptoms:[],probability:.02},{id:49,symptoms:[],probability:.02},{id:50,symptoms:[],probability:.02}],Ae=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var i;return Object(u.a)(this,a),(i=t.call(this,e)).state={currentStep:R,cases:[],buckets:[]},i}return Object(b.a)(a,[{key:"addDemoCases",value:function(){this.setState((function(e,t){return Object(m.a)({},e,{cases:Re})}))}},{key:"addCase",value:function(e){var t=e.id,a=e.symptoms,i=ve()(a);this.setState((function(e,n){var r=[].concat(Object(c.a)(e.cases),[{id:t,symptoms:a,probability:i}]);return Object(m.a)({},e,{cases:r})}))}},{key:"resetState",value:function(){this.setState((function(){return{currentStep:R,cases:[],buckets:[]}}))}},{key:"removeCase",value:function(e){var t=this;this.setState((function(a,i){var n=t.state.cases;return Object(m.a)({},a,{cases:n.filter((function(t){return t.id!==e}))})}))}},{key:"changeStage",value:function(e){this.setState((function(t,a){return Object(m.a)({},t,{currentStep:e})}))}},{key:"calculateBuckets",value:function(){var e=this,t=function(e){for(var t=e.slice(0),a=[];0!==t.length;){var i=me(t);a.push(i),i.samples.forEach((function(e){t.splice(t.indexOf(e),1)}))}return a}(this.state.cases);this.setState((function(e,a){return Object(m.a)({},e,{buckets:t})}),(function(){return e.changeStage(A)}))}},{key:"recalculateBuckets",value:function(){var e=Array.from(this.state.buckets),t=e.filter((function(e){return e.bucketStatus===de.POSITIVE&&e.samples.length>1})),a=e.filter((function(e){return e.bucketStatus===de.NOT_CHECKED})),i=t.flatMap((function(e){return e.samples.map((function(t){var a=new pe;return a.samples.push(t),a.probability=t.probability/e.probability,t.probability=a.probability,a}))})),n=[].concat(Object(c.a)(a),Object(c.a)(i));n.length?this.setState((function(e,t){return Object(m.a)({},e,{buckets:n})})):this.changeStage(k)}},{key:"setBucketStatus",value:function(e,t){this.setState((function(a,i){var n=Array.from(a.buckets);return n.find((function(t){return t.id===e})).bucketStatus=t,Object(m.a)({},a,{buckets:n})}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement("header",null,l.a.createElement(Ce.a,{position:"static"},l.a.createElement(he.a,null,l.a.createElement(ae.a,{variant:"h6"},l.a.createElement("b",null,"Covictory"))))),l.a.createElement("main",null,l.a.createElement(ee.a,null,this.state.currentStep===R&&l.a.createElement(Z,{cases:this.state.cases,addCase:this.addCase.bind(this),addDemoCases:this.addDemoCases.bind(this),removeCase:this.removeCase.bind(this)}),!!this.state.cases.length&&this.state.currentStep===R&&l.a.createElement("div",{style:{display:"flex",justifyContent:"center",margin:"16px"}},l.a.createElement(z.a,{size:"large",color:"primary",variant:"contained",onClick:this.calculateBuckets.bind(this)},"Calculate buckets")),this.state.currentStep===A&&l.a.createElement(Ee,{buckets:this.state.buckets,setBucketStatus:this.setBucketStatus.bind(this),estimatedNumberOfTests:ue(this.state.buckets)}),!!this.state.cases.length&&this.state.currentStep===A&&l.a.createElement("div",{style:{display:"flex",justifyContent:"center",margin:"16px"}},l.a.createElement(z.a,{size:"large",color:"primary",variant:"contained",onClick:this.recalculateBuckets.bind(this)},"Proceed")),this.state.currentStep===k&&l.a.createElement(ge,{callback:this.resetState.bind(this)}))))}}]),a}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(Ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},97:function(e,t){e.exports=function(e){var t=.02;return e.indexOf("FEVER")>-1&&(t+=.02),e.indexOf("COUGH")>-1&&(t+=.03),e.indexOf("BREATHING_PROBLEM")>-1&&(t+=.05),e.indexOf("CLOSE_CONTACT")>-1&&(t+=.1),e.indexOf("COMING_FROM_ABROAD")>-1&&(t+=.07),e.indexOf("PREVIOUS_POSITIVE")>-1&&(t=.9),t.toFixed(3),t}}},[[111,1,2]]]);
//# sourceMappingURL=main.90c75579.chunk.js.map